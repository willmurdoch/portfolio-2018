//Fonts
@import url('https://fonts.googleapis.com/css?family=Raleway')

//Mixins
@mixin gradient($color1, $color2, $angle)
  background: $wmColor1
  background: -moz-linear-gradient($angle, $color1 0%, $color2 100%)
  background: -webkit-linear-gradient($angle, $color1 0%,$color2 100%)
  background: linear-gradient($angle, $color1 0%,$color2 100%)
@mixin pseudoStart
  content: ''
  position: absolute
  display: block
  z-index: 0
  top: 0
  left: 0

//Colors
$wmBlack: #0e0e0e
$wmColor1: #009874

//Breakpoints
$tablet: 1100px
$mobile: 800px

//Globals
*
  box-sizing: border-box
html
  font-size: 18px
  @media (max-width: $mobile)
    font-size: 16px
body
  position: relative
  margin: 0
  width: 100%
  height: 100%
  @include gradient(#e1e1e1, #fff, -45deg)
  font-family: 'Raleway', Arial, sans-serif
  color: $wmBlack
  overflow-x: hidden
  overflow-y: scroll

//Text formatting
h1, h2, h3, h4
  font-weight: 900
  line-height: 1em
h1
  font-size: 4rem
h2
  font-size: 3rem
h3
  font-size: 2rem
p, a
  font-size: 1rem
p
  margin: 0 0 1rem
  line-height: 1.5em
  font-weight: 500

header
  position: absolute
  top: 0
  left: 0
#wrapper
  position: relative
  width: 100%
  height: 100%
  overflow: hidden
.cta
  display: table
  padding: 0.65em 1em
  border: 2px solid $wmColor1
  background: transparent
  color: $wmColor1
  text-transform: lowercase
  font-weight: 900
  margin: 1.5rem 0 0
  text-decoration: none
  transition: color 0.1s ease-out, background 0.1s ease-out, border-color 0.1s ease-out
  &:hover
    background: $wmColor1
    color: #FFF

@keyframes shrinkText
  0%
    letter-spacing: 0
    opacity: 1
  50%
    opacity: 0
  100%
    letter-spacing: -1em
    opacity: 0

header
  text-align: justify
  h1
    font-size: 4rem
    text-transform: uppercase
    margin: 1rem
    color: $wmColor1
    span
      animation: shrinkText 1s 1s ease-in forwards

@keyframes spin
  from
    transform: translateX(-50%) translateY(-50%) translateZ(0) rotate(0deg)
  to
    transform: translateX(-50%) translateY(-50%) translateZ(0) rotate(360deg)

//Project entries
.project
  position: relative
  width: calc(90% - 2rem)
  max-width: 1400px
  margin: 20vh auto 50vh
  font-size: 0
  display: table
  &:last-of-type
    margin-bottom: 0
    padding-bottom: 12rem
  @media (max-width: $tablet)
    margin: 20vh auto 20vh
  @media (max-width: $mobile)
    margin: 5rem auto 10rem
  .circle
    display: none
    position: absolute
    top: 50%
    width: 65%
    padding-bottom: 65%
    border-radius: 100%
    background: rgba($wmColor1, 0.1)
    z-index: 0
    backface-visibility: hidden
    perspective: 1000
    transform-origin: 50% 49%
    transform: translateX(-50%) translateY(-50%) translateZ(0)
    animation: spin 3s linear infinite
  &:nth-child(odd) .circle
    left: 110%
  &:nth-child(even) .circle
    left: 0%
  &:nth-child(3n+1) .circle
    display: block
  h3
    margin: 0
    color: $wmColor1
    &:after
      content: ''
      position: relative
      display: block
      width: 40px
      height: 6px
      background: $wmColor1
      margin: 1rem 0
  .textWrap, .imageWrap
    display: inline-block
    vertical-align: middle
    position: relative
    z-index: 1
    @media (min-width: $mobile)
      img:hover
        border-color: $wmColor1
  .textWrap
    width: 40%
    max-width: 450px
    padding-right: 4rem
    @media (max-width: $mobile)
      width: 90%
      max-width: 500px
      display: block
      margin: 0 auto
      padding-right: 0
    .count
      font-size: 1rem
      font-weight: 900
      position: absolute
      color: $wmColor1
      left: -1.5rem
      top: 0
      @media (max-width: $mobile)
        left: 0
        position: relative
  .imageWrap
    width: calc(100% - 450px)
    position: relative
    padding: 0 5%
    img
      position: relative
      z-index: 2
    @media (max-width: 1125px)
      width: 60%
    @media (max-width: $mobile)
      width: 95%
      left: -2.5%
      display: block
      margin: 4rem auto 0
    .work
      max-width: 100%
      border: 2px solid #111
      height: auto
      display: block
      cursor: pointer
      margin: 0 auto
      image-rendering: -moz-crisp-edges
      image-rendering:   -o-crisp-edges
      image-rendering: -webkit-optimize-contrast
      image-rendering: crisp-edges
      -ms-interpolation-mode: nearest-neighbor
      transition: border-color 0.1s ease-out
    .desktop, .mobile
      backface-visibility: hidden
      perspective: 1000
      transition: all 0.2s ease-out
    .device
      position: absolute
    .shine
      position: absolute
      overflow: hidden
      z-index: 1
      pointer-events: none
      &:after
        +pseudoStart
        background: #FFF
        width: 75%
        padding-bottom: 75%
        left: unset
        transform-origin: top right
        transform: rotate(45deg)
        z-index: 3
    .desktop
      transform: scale(1)
      .shine
        width: 107.5%
        height: 123%
        top: -7.5%
        left: -3.5%
        border-radius: 30px 30px 0 0
        &:after
          top: -5%
          right: -55%
          opacity: 0.1
        @media (max-width: $tablet)
          border-radius: 20px 20px 0 0
        @media (max-width: $mobile)
          border-radius: 10px 10px 0 0
      .device
        background: #111
        width: 107.5%
        height: 115%
        top: -7.5%
        left: -3.5%
        border-radius: 30px 30px 0 0
        @media (max-width: $tablet)
          border-radius: 20px 20px 0 0
        @media (max-width: $mobile)
          border-radius: 10px 10px 0 0
        .base
          position: absolute
          bottom: 0
          transform: translateY(80%)
          width: 115%
          left: -7.5%
          padding-bottom: 2.5%
          border-radius: 0px 0px 5px 5px
          background: #d1d6db
          z-index: 2
          @media (max-width: $mobile)
            padding-bottom: 4%
          &:after
            +pseudoStart
            top: unset
            bottom: 1px
            width: calc(100% - 100px)
            border-top: 20px solid #80858a
            border-left: 50px solid transparent
            border-right: 50px solid transparent
            border-radius: 5px
            height: 0
            transform: translateY(100%)
            @media (max-width: $tablet)
              border-top: 12px solid #80858a
            @media (max-width: $mobile)
              border-top: 6px solid #80858a
      &.in
        transform: scale(1.1)
    .desktop.out
      transform: scale(0.9)
      & ~ .mobile
        width: 375px
        max-width: 35%
        bottom: -2rem
    .mobile
      position: absolute
      right: -5%
      bottom: -1rem
      width: 285px
      max-width: 25%
      transform-origin: 50% 20%
      .shine
        width: 105%
        height: 120%
        left: -2.5%
        top: -10%
        border-radius: 30px
        &:after
          top: -15%
          right: -85%
          width: 150%
          padding-bottom: 130%
          opacity: 0.05
        @media (max-width: $tablet)
          border-radius: 20px
        @media (max-width: $mobile)
          border-radius: 10px
      .device
        width: 105%
        height: 120%
        left: -2.5%
        background: #222
        top: -10%
        border-radius: 30px
        @media (max-width: $tablet)
          border-radius: 20px
        @media (max-width: $mobile)
          border-radius: 10px
      &.out
        transform: translateX(110%) scale(0.8)
  //Flip even sections to mix things up
  @media (min-width: $mobile)
    &:nth-of-type(even)
      direction: rtl
      .textWrap
        direction: ltr
        padding-right: 0
        padding-left: 4rem
        .count
          left: 2rem
      .imageWrap
        .mobile
          right: unset
          left: -5%
          &.out
            transform: translateX(-110%) scale(0.8)
