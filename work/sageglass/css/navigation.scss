@import 'globals.scss';

@mixin dropdowns{
	.menuparent{
		display:inline-block;
		vertical-align:middle;
		position:relative;
		background:transparent;

		&:before{
			content:'';
			position:absolute;
			display:block;
			width:110%;
			left:-5%;
			height:90px;
			top:50%;
			transform:translateY(-50%);
			-webkit-transform:translateY(-50%);
			margin-top:-5px;
			background:#FFF;
			opacity:0;
			-webkit-transition:opacity 0.3s ease-out;
			transition:opacity 0.3s ease-out;
		}
		&:after{
			content:'\276F';
			position:absolute;
			right:0;
			transform:rotate(90deg) translateZ(0);
			-webkit-transform:rotate(90deg) translateZ(0);
			backface-visibility:hidden;
			-webkit-backface-visibility:hidden;
			margin-right:1rem;
			top:0.6rem;
			font-weight:600;
		}
		a{
			outline:3px solid transparent;
		}
	}
	.menuparent:hover{
		z-index:4;
		ul{
			max-height:17rem;
			opacity:1;
		}
		&:before{
			opacity:1;
		}
		&:after{
			color:$sageBlack;
		}
		a.active{
			outline:3px solid transparent;
		}
	}
	.menuparent ul{
		position:absolute;
		display:block!important;
		width:110%;
		min-width:230px;
		top:calc(4rem - 4px);
		left:-5%;
		right:0;
		overflow:hidden!important;
		max-height:0;
		-webkit-transition:opacity 0.2s ease-out, max-height 0.4s ease-out;
		transition:opacity 0.2s ease-out, max-height 0.4s ease-out;
		text-align:center;
		opacity:0;
		background:#FFF;
		margin:0 auto;
		padding:0.5rem 0;
		padding-top:0;
		border-bottom:5px solid $sageYellow;

		li{
			position:relative;
			width:100%;
			background:transparent;
			border:0;
			margin:0;
		}
		li:first-child{
			margin-top:1rem;
		}
		a,span{
			display:block;
			width:calc(90% - 1.5rem);
			padding:0.75rem calc(0.75rem + 5%);
			text-align:left;
			margin:0;
			line-height:1em;
			color:$sageGray2;
			background:#FFF;
		}
		span{
			color:#CCC;
		}
		a:hover,a.active{
			background:$sageYellow;
			color:#4e4c4d!important;
			text-decoration:none;
		}
		a.active[href*='#']{
			background:#FFF;
			color:$sageBlack;

			&:hover{
				background:$sageYellow;
			}
		}
	}
}
nav ul.nice-menu-down .menuparent a, nav .langPicker p, nav ul.nice-menu-down .menuparent span{
	padding-right:2.5rem!important;
}

.scrolled{
	#sgBranding{
		margin-bottom:calc(-3vh - 150px);
	}
}
#sgBranding{
	position:absolute;
	right:0;
	bottom:0;
	z-index:1000;
	-webkit-transition: all 0.3s ease-out;
	transition: all 0.3s ease-out;
	width:200px;

	img{
		margin:0;
	}
}
#cartoucher{
	left:0;
	right:0;
	position:fixed;
	bottom:0;
	z-index:1000;
}
#leadGen{
	position: absolute;
	bottom: -102px;
	right: 0;
	-webkit-transition: bottom 0.3s ease-out;
	transition: bottom 0.3s ease-out;
}
.scrolled #leadGen{
	bottom: 0;
}
.page-contact #leadGen{
	display: none;
}
@media (max-width: $mobile){
	#cartoucher, #sgBranding{
		display: none;
	}
}

/*Main Navigation*/
nav{
	width:100%;
	display:block;
	position:fixed;
	top:0;
	z-index:3;
	background:#FFF;
	-webkit-box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.25);
	        box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.25);
	-webkit-transition:background 0.3s ease-out, -webkit-box-shadow 0.3s ease-out;
	transition:background 0.3s ease-out, -webkit-box-shadow 0.3s ease-out;
	transition:background 0.3s ease-out, box-shadow 0.3s ease-out;
	transition:background 0.3s ease-out, box-shadow 0.3s ease-out, -webkit-box-shadow 0.3s ease-out;
	-webkit-transform: translate3d(0,0,0);
  transform: translate3d(0,0,0);
	backface-visibility:hidden;
	-webkit-backface-visibility:hidden;

	/*StGobain Network Strip*/
	.sgBar{
		font-size:13px;
		line-height:0.5em;
		display:table;
		width:100%;
		padding:0.6em 0;
		background:#1a1719;
		position:relative;
		z-index:6;
		margin-bottom:0;
		-webkit-transition:margin-bottom 0.3s ease-out;
		transition:margin-bottom 0.3s ease-out;

		.scaler{
			max-width:1560px;
		}
		.stGobainSites{
			float:left;

			a,span{
				display:inline-block;
				vertical-align:middle;
			}
			a:first-of-type{
				margin-top:2px;

				&:before{
					content:'';
					display:inline-block;
					background:url(../img/sg_logo.png) center no-repeat;
					width:22px;
					height:22px;
					margin-top:calc(-22px + 1.5em);
					vertical-align:middle;
					background-size:contain;
					margin-right:0.5em;
				}
			}
			a:hover{
				text-decoration:underline;
			}
		}
		.stGobainSearch{
			float:right;

			a{
				background:url(../img/sg_search.png) center no-repeat;
				display:inline-block;
				width:15px;
				height:22px;
			}
		}
		.scaler{

			a,span{
				color:#c1c1c1;
				font-size:1em;
			}
		}
		span{
			margin:0 0.25em;
			font-size:1.5em;
		}
	}
	ul,ul.nice-menu-down{
		display:inline-block;
		float:none;
		padding:0;
		margin:0;
		z-index:auto;

		li.menuparent{
			background:transparent!important;
		}
	}
	.main-menu{display:inline-block;}
	/*Sage Nav*/
	.scaler{
		display:table;
		width:99%;
		position:static;
	}
	#logo, .navSpacer{
		position:relative;
		display:inline-block;
		vertical-align:middle;

		img{
			display:block;
			float:left;
		}
	}
	#logo{
		width:120px;
		z-index:2;

		img{
			width:100px;
			position:relative;
			z-index:1;
			-webkit-transition:width 0.3s ease-out, height 0.3s ease-out;
			transition:width 0.3s ease-out, height 0.3s ease-out;
		}
		.sgBridge{
			position:absolute;
			top:50%;
			opacity:0;
			z-index:0;
			-webkit-transition:top 0.3s ease-out, width 0.3s ease-out, opacity 0.3s ease-out;
			transition:top 0.3s ease-out, width 0.3s ease-out, opacity 0.3s ease-out;
		}
	}
	.navSpacer{
		width:1px;
		height:100px;
		-webkit-transition:width 0.3s ease-out, height 0.3s ease-out;
		transition:width 0.3s ease-out, height 0.3s ease-out;
	}

	.navBtn,.top,.nice-menu,.langPicker p{
		display:inline-block;
		vertical-align:middle;
		position:relative;
		color:#4e4c4d;
		font-size:0.95rem;
		outline:3px solid transparent;
		cursor:pointer;
		-webkit-transition:color 0.3s ease-out;
		transition:color 0.3s ease-out;
	}
	ul{
		.navBtn,.top,.nice-menu{

			& > a, & > p, & > span{
				padding:0.75rem 1rem;
				display:inline-block;
				position:relative;
				z-index:1;
				margin:0;
				outline:3px solid transparent;
				color:$sageGray2;

				&.active{
					outline:3px solid $sageYellow;
				}
			}
			ul{
				border-top:0;
			}
		}
		.navBtn:not(.menuparent),.top:not(.menuparent){
			& > a, & > p, & > span{
				-webkit-transition:outline 0.3s ease-out, color 0.2s ease-out, background 0.2s ease-out;
				transition:outline 0.3s ease-out, color 0.2s ease-out, background 0.2s ease-out;

				&:hover{
					outline:3px solid $sageYellow;
					text-decoration:none;
				}
			}
		}
	}
	ul.nice-menu{
		li{
			background:transparent;
			border:0;
		}
		@include dropdowns;
	}
	.leftLinks,.rightLinks{
		display:inline-block;
		position:relative;
		vertical-align:middle;
		-webkit-transition:margin 0.3s ease-out;
		transition:margin 0.3s ease-out;
		margin:0 0 -10px;
	}
	.leftLinks{
		float:left;
		text-transform:uppercase;
		font-weight:600;

		.navBtn,.top{
			margin:0 0.5vw;
		}
	}
	.rightLinks{
		float:right;

		.navBtn,.top{
			margin:0 0.15vw;

			& > a, & > p, & > span{
				text-transform:lowercase;
				font-weight:500;
			}
			& > p, & > span{
				padding:0 1rem;
				line-height:1em;
			}
		}
	}
	.vertSplit{
		display:inline-block;
		vertical-align:middle;
		position:relative;
		width:1px;
		margin:-15px 0.2vw 0;
		height:95px;
		background:#cdcacc;
		-webkit-transition:height 0.3s ease-out, margin-top 0.3s ease-out, color 0.3s ease-out;
		transition:height 0.3s ease-out, margin-top 0.3s ease-out, color 0.3s ease-out;
	}
	.langPicker.menuparent{
		float:right;
		margin-right:0rem;

		ul{
			top:1.5rem!important;
			background:#1a1719;
			width:130%;
			min-width:130%;
			left:-15%;
			a,span{
				background:#1a1719;
				color:#c1c1c1 !important;
				font-weight:500;

				&:hover{
					color:#1a1719!important;
				}
			}
		}
		p{
			margin:0;
			color:#c1c1c1!important;
			padding-right:1rem!important;
			@media (max-width:$mediumScreen){
				margin-top:3px;
			}
		}
		&:before,&:after{
			display:none;
		}
		#lang{
			text-transform:uppercase;
			color:$sageYellow;
			-webkit-transition:color 0.3s ease-out;
			transition:color 0.3s ease-out;
		}
		ul{
			width:110%;
			min-width:110%;
		}
	}
	.downArrow{
		transform:rotate(90deg) translateZ(0);
		-webkit-transform:rotate(90deg) translateZ(0);
		backface-visibility:hidden;
		-webkit-backface-visibility:hidden;
		margin:0 1px 4px 0.5rem;
		display:inline-block;
		position:relative;
		font-size:1rem;
		font-weight:600;
		vertical-align:middle;
	}

	@include dropdowns;

}
.darkener{
	position:absolute;
	top:0;
	left:0;
	width:100vw;
	height:100vh;
	background:#000;
	z-index:2;
	opacity:0;
	-webkit-transition:opacity 1s;
	transition:opacity 1s;
	pointer-events:none;
}
.darkener.active{
	display:block;
	opacity:0.2;
}
.desktopNav{
	display:inline-block;
	margin-left:1rem;
}
.rightLinks{
	.desktopNav{
		margin-left:0;
	}
}
.mobileBtn{
	display:none;
	position:absolute;
	cursor:pointer;
	padding:15px;
	border-radius:100%;
	top:65px;
	right:10px;
	-webkit-transition:right 0.3s ease-out;
	transition:right 0.3s ease-out;
	background:#FFF;
	z-index:6;

	div{
		width:25px;
		height:5px;
		position:relative;
		left:0;
		background:$sageYellow;
		border-radius:3px;
		transition:all 0.3s ease-out;
		-webkit-transition:all 0.3s ease-out;
	}
	div:first-child{
		transform-origin:center left;
		-webkit-transform-origin:top left;
	}
	div:nth-child(2){
		margin:0.25rem 0;
	}
	div:last-child{
		transform-origin:center right;
		-webkit-transform-origin:bottom left;
	}
}
.mobileBtn.open{
	div{
		left:6px;
	}
	div:first-child{
		transform:rotate(47.5deg);
		-webkit-transform:rotate(47.5deg);
	}
	div:nth-child(2){
		opacity:0;
	}
	div:last-child{
		transform:rotate(-47.5deg);
		-webkit-transform:rotate(-47.5deg);
	}
}
.mobileNav{
	display:none;
	position:absolute;
	width:100%;
	z-index:1;
	top:0;
	background:#FFF;
	text-transform:uppercase;

	.mobileMask{
		width:50px;
		height:50px;
		background:#FFF;
		border-radius:100%;
		position:fixed;
		overflow:hidden;
		top:66px;
		right:13px;
		-webkit-transition:all 0.75s;
		transition:all 0.75s;

	}
	ul.nice-menu{
		opacity:1;
		position:absolute;
		right:-13px;
		top:-66px;
		overflow-x:hidden;
		overflow-y:auto;
		width:100vw;
		-webkit-overflow-scrolling:touch;
		height:calc(100vh - 150px - 1em);
		padding-top:150px;
		padding-bottom:1rem;
		-webkit-transition:all 0.75s;
		transition:all 0.75s;
		.languages{
			a{
				text-transform: uppercase!important;
			}
		}
		li{
			width:100vw;

			a{
				max-width:100%;
				margin:0 auto;
				text-align:center;
			}
			span{
				width:100%;
				padding-left:0!important;
				font-weight:700;
				font-size:2rem;
				text-align:center;
			}
		}

		.menuparent{
			padding:0;

			a{
				padding-right:1rem;
			}
			&:before{
				content:'+';
				position:absolute;
				width:1rem;
				height:1rem;
				background:transparent;
				left:inherit;
				right:2rem;
				color:$sageYellow;
				top:0.75rem;
				font-size:3rem;
				font-weight:900;
				opacity:1;
			}
			&:after{
				display:none;
			}
			ul{
				border-bottom:0;
				opacity:1;
				top:0;
				left:0;
				min-width:0;
				width:100%;
				position:relative;
				padding:0;

				a{
					width:100%;
					padding:0.75rem 0;
					background:$sageYellow;
					visibility:visible!important;
					text-align:center;
				}
				li:first-child a{
					padding-top:1.5rem;
				}
				li:last-child a{
					padding-bottom:1.5rem;
				}
			}
		}
		.menuparent.expanded{
			&:before{
				content:'-';
			}
		}
		.menuparent:hover{
			ul{
				max-height:0;
			}
		}
	}
	ul{
		width:100%;

		li{
			width:100%;

			a{
				width:calc(100% - 2rem);
				max-width:95%;
				margin:0 auto;
				display:block;
				outline:0!important;
				font-size:2rem;
			}
		}
	}
}
.mobileNav.open{
	.mobileMask{
		width:300vh;
		height:300vh;
		top:-30vh;
		right:-100vh;
		border-radius:0;

		ul.nice-menu{
			opacity:1;
			top:30vh;
			right:100vh;
		}
	}
}
.i18n-de nav ul.nice-menu .menuparent ul{
	min-width: 250px;
}
.i18n-de nav .rightLinks ul li a{
	text-transform: none;
}
.i18n-de nav .langPicker.menuparent p{
	text-transform: capitalize;
}
@media (min-width:$tablet){
	nav.expanded{
		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+100&0.85+0,0+100 */ /* FF3.6-15 */ /* Chrome10-25,Safari5.1-6 */
		background: -webkit-gradient(linear,  left top, left bottom,  from(rgba(0,0,0,0.45)),to(rgba(0,0,0,0)));
		background: linear-gradient(to bottom,  rgba(0,0,0,0.45) 0%,rgba(0,0,0,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d9000000', endColorstr='#00000000',GradientType=0 ); /* IE6-9 */
		-webkit-box-shadow: 0px 2px 15px rgba(0, 0, 0, 0);
		        box-shadow: 0px 2px 15px rgba(0, 0, 0, 0);

		#sgBranding{
			margin-top:-60px;
			width:149px;
			margin-left:1rem;
		}
		#sgBacking{
			top:-50px;
		}
		#sgLogo{
			top:0;
		}
		.sgBar{
			margin-bottom:20px;
		}
		#logo{
			img{
				width:120px;
			}
			.sgBridge{
				top:calc(100% + 1rem);
				opacity:1;
			}
		}
		.navSpacer{
			height:120px;
		}
		.navBtn,.top{

			& > a, & > p, & > span{
				color:#FFF;
			}
		}
		.vertSplit{
			background:#FFF;
			margin-top:0px;
			height:35px;
		}
		.navBtn,.top,.langPicker p{
			color:#FFF;
		}
		.menuparent:hover{
			p,span,a{
				color:$sageGray2;
			}
		}
		.leftLinks,.rightLinks{
			margin:0 0 0;
		}
	}
}
@media (max-width:$mediumScreen){
	nav{
		ul.nice-menu, ul{
			li.menuparent{
				ul{
					top:calc(5rem - 8px);
				}
			}
		}
		.langPicker.menuparent{
			ul{
				top:calc(5rem - 8px);
			}
		}
	}
}
@media (max-width:$smallScreen){
	nav{
		ul.nice-menu{

			.navBtn, .top{
				& > a, & > p, & > span{
					padding:0.75rem 0.65rem;
				}
			}
			.menuparent{

				a{
					padding-right:25px!important;
				}
				&:after{
					margin-left:-22px;
				}
			}
		}
	}
}
@media (max-width:1023px){
	nav{
		background:transparent;
		-webkit-box-shadow:none;
		        box-shadow:none;

		#logo{
			margin-top:10px;
			width:90px;
			-webkit-box-shadow:0px 10px 10px rgba(0,0,0,0.1);
			        box-shadow:0px 10px 10px rgba(0,0,0,0.1);

			img{
				width:90px;
			}
		}
		.scaler{
			width:95%;
		}
		.navBtn,.top{
			margin:0 0.3vw;

			& > a, & > p, & > span{
				padding:0.75rem 0.5rem;
			}
		}
	}
	.desktopNav{
		display:none;
	}
	.mobileBtn,	.mobileNav{
		display:block;
	}
}
